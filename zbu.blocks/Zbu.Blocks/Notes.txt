Install-Package Newtonsoft.Json -Version 4.5.11
=> use the same version Umbraco 6.2 uses

TODO

- do we want partial structures on children (what is this)?

- AJAX & MOBILE
    we need a way to tell we want a special structure because we're AJAX
	introduce a structure.context field and block.context field => only pick what's in the proper context

- Fragment
    code the handling of the fragment in RenderingBlock
	prob. need a block.fragmentType field to indicate the content type of the fragment

- What's in a block
    find a way to indicate that a block's sub-blocks are columns
	via a block.layout field?

	do we want to restrict the list of block name/source/whatever that can appear under a given block?
	do we need block types to handle all this?


RENDERING


@{
	// explicit
	var structure = Blocks.GetStructure(model.Content.StructureData)

	// but actually Model should have a model.Structure property
}
@{
	Layout = Model.Structure.Source;
}

STRUCTURE TEMPLATE:

	-- that template is picked using the structure.source field

	@{
		Layout = "master.cshtml";
	}

	<div>
		@Blocks.Render(Model.Structure.Blocks["header"]);
	</div>
	<div>
		@Blocks.Render(Model.Structure.Blocks["footer"]);
	</div>

BLOCK TEMPLATE:

	<div>
		<!-- render foo here -->
		@Blocks.Render(Model.Block.Blocks["foo"]);
	</div>

BLOCK TEMPLATE:

	<div>
		<!-- iterate through all inner blocks and render them -->
		@foreach (var block in Model.Block.Blocks)
		{
			// this will use block.source to load the proper view
			// and will pass the block object as Model.Structure
			@Blocks.Render(block)
		}
	</div>

BLOCK TEMPLATE:

	<!-- display the selected image -->
	<img src="@Model.Block.Fragment.Image.Urls.CropResized(100, 100)" />

